import { Callout } from 'nextra-theme-docs'
import Screenshot from 'components/screenshot'


# Annotating Datasets

In this guide, we will explore the process of annotating datasets which involves describing, to Fides, where categories of personal data (e.g. user contact info) can be found and how fields in tables or collections are related so that Fides can traverse the data to fulfill privacy requests. 

## Annotating data categories
In order to process privacy requests, Fides needs to know how to find the applicable categories of personal data. For example, if a data subject submits a request to have their personal data removed, Fides has to know where to find categories of personal data like _user contact info_, _demographic info_, or _purchase history_. 

The way we instruct Fides to locate this data is to attach labels to fields in your database tables to indicate where a particular type of personal data can be found. 

For example, if you have a table with fields that contain _user contact data_, you'd label them with elements from the `user.contact` branch of the [FidesLang Taxonomy](https://ethyca.github.io/fideslang/taxonomy/data_categories/) as such:

<Screenshot img="/assets/img/privacy-requests/sample_annotations.gif" description="Sample annotations" /> 

Datasets may be annotated manually or using FidesClassify to automate the annotation. To learn more about using FidesClassify, please see our [Classiying datasets](#LINK) guide.


### Annotating in the UI

To annotate a dataset using the UI:
1. Navigate to *Data map* â†’ *Manage datasets*.
2. Click on the appropriate dataset.
3. Select the table or collection from the dropdown menu at the top of the table. 
4. Click into the field. 
5. Select the appropriate data category

<Screenshot img="/assets/img/privacy-requests/annotate_manually.gif" description="Manually annotate data categories" /> 

### Annotating in the file

To directly annotate a dataset with data categories, you may use our _dataset editor_ or a tool of your choice. 
The dataset fields that will need to be configured are: 
* `fides_key`: the name of the dataset
* `collections`: a list of the tables or collections within the database.
* `fields`: a list of the fields within the table or collection.
* `name`: the name of the field within the table or collection.
* `data_categories`: a data category label taken from the [FidesLang Taxonomy](https://ethyca.github.io/fideslang/taxonomy/data_categories/) to describe the personal data found in this field.

The following example describes a table called `user_contact_info` within a database called `sample_dataset`. This table has the fields `id`, `email`, `first_name`, and `last name` which have been appropriately labeled for privacy request processing.

```yaml
dataset:
  - fides_key: sample_dataset
    collections:
      - name: user_contact_info
        fields:
          - name: id
            data_categories:      # Add section
              - system.operations # Provide label from taxonomy
          - name: email
            data_categories:
              - user.contact.email
          - name: first_name
            data_categories:
              - user.name
          - name: last_name
            data_categories:
              - user.name
```

To upload this file to Fides, please follow these steps: [Uploading a dataset](generate-datasets#uploading-a-dataset)

### Adding an identity key
Once the dataset has been annotated with data categories, we need to provide Fides with an `identity key` to indicate which field Fides should use to search for records.

<Callout emoji="" type="info">The _identity_ key must be assigned to a field that contains unique values.</Callout>

Expanding our example above, the best field to use for the `identity key` would be the `email` field because it is unique and identifiable. 

```yaml
dataset:
  - fides_key: sample_dataset
    collections:
      - name: user_contact_info
        fields:
          - name: id
            data_categories:
              - system.operations
          - name: email
            data_categories:
              - user.contact.email
              fides_meta:        # Add section
                identity: email  # Make identity declaration
          - name: first_name
            data_categories:
              - user.name
          - name: last_name
            data_categories:
              - user.name
```



To learn more about advanced coniguration options and how Fides traverses databases, please see our guide for [Query execution](../../dev-docs/configuration/privacy-requests/graphs)
